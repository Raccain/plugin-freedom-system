window:
  width: 700
  height: 500
  resizable: false

colors:
  # Background gradients - warm cream
  background_gradient_start: "#d4c4b0"
  background_gradient_end: "#b8a690"

  # Plugin surface - lighter cream
  surface_gradient_start: "#e8dcc8"
  surface_gradient_end: "#d9cbb5"

  # Controls - slightly darker cream
  control_gradient_start: "#d4c2ae"
  control_gradient_end: "#c4b19d"

  # Accent - muted brown
  accent_primary: "#8c6d54"
  accent_secondary: "#a58870"

  # Text - soft brown
  text_primary: "#6b5846"
  text_secondary: "#7a6652"

  # Waveform - burnt orange on dark grey
  waveform_background: "#3a3a3a"  # Dark grey background
  waveform_active: "#c96a3d"  # Burnt orange for active waveform
  waveform_inactive: "#5a5a5a"  # Slightly lighter grey for masked region
  playback_cursor: "#e8dcc8"  # Cream-colored cursor for visibility

  # Folder icon
  folder_icon: "#e8dcc8"  # Cream color matching plugin surface

typography:
  font_family: "-apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif"
  font_weight_normal: 300
  font_weight_medium: 400
  letter_spacing: "0.03em"

shadows:
  # Neomorphic paired shadows
  light_shadow: "-4px -4px 8px rgba(255, 255, 255, 0.6)"
  dark_shadow: "4px 4px 8px rgba(0, 0, 0, 0.15)"
  light_shadow_inset: "inset -2px -2px 4px rgba(255, 255, 255, 0.6)"
  dark_shadow_inset: "inset 2px 2px 4px rgba(0, 0, 0, 0.15)"

layout:
  type: vertical-sections
  padding: 48
  gap: 36

  sections:
    - id: waveform-section
      height: 280
      controls: [waveform-display]

    - id: controls-section
      height: auto
      controls: [station, start, speed-pitch, volume]

controls:
  - id: waveform-display
    type: custom-waveform
    width: 604  # 700 - (2 * 48) padding
    height: 280
    description: |
      Horizontal waveform display with adaptive masking:
      - Shows entire file waveform (landscape orientation)
      - Dark grey background (#3a3a3a)
      - Region before Start position uses waveform_inactive color (#5a5a5a)
      - Active region uses burnt orange (#c96a3d)
      - Playback position cursor (vertical cream line)
      - Folder browse button in top-right corner (32x32px)
      - Button is cream-colored folder icon (NOT emoji), integrated into waveform background
      - Empty state: dark grey background with centered "Load Folder" text

    states:
      - empty: "No folder loaded - dark grey canvas with 'Load Folder' prompt"
      - loaded: "Waveform visible on dark grey, browse button visible"

    browse_button:
      size: 32
      position: top-right
      margin: 8
      icon_type: "svg-folder"  # SVG folder icon in cream color
      background: transparent  # No card background, just icon on waveform
      color: "#e8dcc8"  # Cream color

  - id: station
    type: rotary-knob
    label: "STATION"
    parameter: "station"
    range: [0.0, 100.0]
    unit: "%"
    default: 0.0
    center_detent: false
    size: 80
    position_align: left-edge-of-waveform
    description: "Selects file from loaded folder (maps to file index). Full 0-100% range usage."

  - id: start
    type: rotary-knob
    label: "START"
    parameter: "start"
    range: [0.0, 100.0]
    unit: "%"
    default: 0.0
    center_detent: false
    size: 80
    position_align: distributed-evenly
    description: "Re-trigger position within selected file. Full 0-100% range usage."

  - id: speed-pitch
    type: rotary-knob
    label: "SPEED"
    parameter: "speed_pitch"
    range: [-1.0, 1.0]
    unit: "semitones"  # Or use multiplier display
    default: 0.0
    center_detent: true
    center_snap_threshold: 0.05
    size: 80
    position_align: distributed-evenly
    description: |
      Playback speed/pitch (tape-style, coupled).
      - Center (12 o'clock): 0 = normal speed (1.0x)
      - Left (-1.0): slower/lower pitch
      - Right (+1.0): faster/higher pitch
      - Snaps to center when within threshold

  - id: volume
    type: rotary-knob
    label: "VOLUME"
    parameter: "volume"
    range: [-60.0, 12.0]  # -inf to +12dB (use -60dB as practical minimum)
    unit: "dB"
    default: 0.0
    center_detent: true
    center_snap_threshold: 0.5  # 0.5dB threshold
    size: 80
    position_align: right-edge-of-waveform
    description: |
      Output gain control.
      - Center (12 o'clock): 0dB = unity gain
      - Left: -60dB (effectively -inf)
      - Right: +12dB
      - Snaps to 0dB center when within threshold

knob_layout:
  alignment: horizontal
  count: 4
  spacing: distribute-evenly-between-waveform-edges
  # Left edge of Station aligns with left edge of waveform
  # Right edge of Volume aligns with right edge of waveform
  # Start and Speed distributed evenly between them

visual_style:
  texture_approach: minimal-linear-gradients
  gradient_spacing: 2-4px
  directional_lighting: 135deg-145deg
  noise: none
  highlight_overlays: subtle

interaction_feel:
  control_response: smooth-analog
  active_state_scale: 0.98  # Subtle depression (was 0.95)
  shadow_transition: reduce-on-active
  feedback_style: minimal-refined
  center_snap: "Speed and Volume knobs snap to 12 o'clock (center) when close"

file_info_display:
  content: "[fileIndex]/[totalFiles]: [fileName]"
  example: "5/127: track_name.wav"
  font_size: 12
  color: "#e8dcc8"  # Cream color for visibility on dark grey
  position: bottom-left-of-waveform
  margin: 8

technical_notes:
  waveform_rendering:
    - Downsampled for performance
    - Canvas-based drawing
    - Dynamic update on Station change
    - Adaptive masking based on Start parameter (grey vs orange)
    - Real-time playback cursor position (cream vertical line)
    - Dark grey background for contrast with orange waveform

  gradient_layering:
    - Directional lighting overlay
    - Optional repeating texture (2-4px linear gradient)
    - Primary gradient
    - Borders via separate property

  control_states:
    knobs: "Rotation with centered transform-origin"
    active: "Scale 0.98 (subtle) + reduced shadow"
    transitions: "Smooth CSS transitions (150-250ms)"
    center_snap: |
      Speed and Volume implement center detent:
      - When value is within threshold of center (0.0), snap to exact center
      - Visual feedback: slight resistance feel or marker at 12 o'clock
      - Station and Start: no center snap, full range 0-100%

  parameter_ranges:
    station: "0-100% linear, maps to file index (0 = first file, 100% = last file)"
    start: "0-100% linear, maps to file position (0 = beginning, 100% = end)"
    speed_pitch: |
      -1.0 to +1.0 (bipolar, center = 0.0)
      - Maps to playback rate multiplier
      - Suggested mapping: -1.0 = 0.5x, 0.0 = 1.0x, +1.0 = 2.0x
      - Or semitone mapping: -12 to +12 semitones
      - Display as multiplier (e.g., "0.75x", "1.00x", "1.50x")
    volume: |
      -60dB to +12dB (bipolar, center = 0dB)
      - -60dB effectively -infinity (silence)
      - 0dB = unity gain (center)
      - +12dB = 4x amplitude

  folder_button:
    - SVG-based folder icon (not emoji)
    - Cream color (#e8dcc8) for consistency
    - No background card - transparent button
    - Icon drawn directly on waveform background
    - Hover state: slight opacity increase
    - Active state: subtle scale reduction (0.98)
